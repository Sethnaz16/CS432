<!DOCTYPE html>
<html>
<head>
  <% include ../partials/header.ejs %>
</head>

<body>

  <% include ../partials/nav.ejs %>

<div class="container">
  <div class="row">
      <div class="col-md-8">
          <h2>jdssjkdfbsjs</h2>
          <table class="table table-striped">
              <thead>
                  <tr>
                      <th>Name</th>
                      <th>Category</th>
                      <th>Details</th>
                  </tr>
              </thead>
              <tbody>

                  <% jsdata.sources.forEach(function(item){ %>
                        <tr>
                            <td><%= item.name %></td>
                            <td><%= item.category %></td>
                            <td>
                                <a href="/news-sources/<%= item.category %>/<%= counter %>" class="btn btn-primary">View</a>
                            </td>
                        </tr>
                  <% counter++ }) %>

              </tbody>
          </table>
      </div>
      <div class="col-md-4">
          <div class="row">
              <h2>Filter</h2>
          <form>
            <div class="selectpicker form-group">
              <label for="sel1">Select list (select one):</label>
              <select class="form-control" id="sel2" onchange="changeLink()">
                  <% 
                  var catSet = new Set();
                  jsdata.sources.forEach(function(item){
                      if(catSet == null) {
                          catSet.add(item.category);
                      } else {
                          if(catSet.has(item.category)){
                              return;
                          } else {
                              catSet.add(item.category);
                          }
                      }
                   %>
                    <option value="<%= item.category %>"><%= item.category %></option>
                  <% } )%>
              </select>
            </div>
            <script>
                function changeLink(){
                  var sel = document.getElementById("sel2").value;
                  document.getElementById("link2").href = "news-sources/" + sel;
                };
                
            </script>
            <a id="link2" href="" class="btn btn-danger">Filter</a>
        </form>
          </div>
          <!--
          <div class="row">
              <% // include ../partials/add-form.ejs %>
          </div>
          -->
      </div>
              
      
  </div> <!-- row -->
   
</div>


</body>
</html>

